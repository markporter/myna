<html>
	<head>
		<title> Example JSON-MYNA web service caller</title> 
		<script type="text/javascript" src="<%=$server.rootUrl%>shared/js/libOO/client.sjs"></script>
		<script>
		
			function showBob(bob){
				debug_window("WS via script include w/callback. Callback called with value:")
				debug_window(bob)
			}
			window.onload =function(){
				debug_window("WS via script include w/scriptvar=bob. Value of bob:")
				debug_window(bob)
			})
		</script>
		<%-- 
			JSON-MYNA call via script include w/callback function. The callback 
			function must be defined before this is called. After the include
			the callback function will be called with the result of the service 
			call 
		--%>
		<script src="MyService.ws?json-myna&method=get_bob&callback=showBob"></script>
		<%-- 
			JSON-MYNA call via script include w/scriptvar function. After the 
			include this variable will contain the result of the service call
		--%>
		<script src="MyService.ws?json-myna&method=get_bob&scriptvar=bob"></script>
		
	</head>
	<body>
		<h1>Example JSON-MYNA web service caller</h1>
		
		View the auto generated MyService <a href="MyService.ws">documentation</a>.<p>
		regular JSON-MYNA call:<p> 
		<%
			var con =new Myna.HttpConnection({
				url:$server.serverUrl+$server.rootUrl+"/examples/web_service/MyService.ws",
				parameters:{
					"json-myna":"",
					method:"get_bob"
				},
				//these are needed because we are running in the examples folder
				username:$req.authUser,
				password:$req.authPassword
			})
			con.connect();
			Myna.print(con.getResponseText());
		%>
		
	</body>
</html>