<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>Myna.Sandbox - Myna Application Server</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script><script type="text/javascript" src="../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../js/shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../../js/shjs/css/sh_mild_white.css"></head><body id=ContentPage onLoad="NDOnLoad();sh_highlightDocument();"><script language=JavaScript><!--
if (browserType) {document.write("<div id=" + browserType + ">");if (browserVer) {document.write("<div id=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 02-10-2007 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass CTopic" id=MainTopic><h1 class=CTitle><a name="Myna.Sandbox"></a>Myna.<span class=HB> </span>Sandbox</h1><div class=CBody><p class=CParagraph>Creates a sandbox for running JavaScript code with restrictions on access to Java and and hosting code.</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBody><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Myna.Sandbox" >Myna.<span class=HB> </span>Sandbox</a></td><td class=SDescription>Creates a sandbox for running JavaScript code with restrictions on access to Java and and hosting code.</td></tr><tr class="SGeneric SIndent1 SMarked"><td class=SEntry><a href="#Myna.Sandbox.Examples" >Examples</a></td><td class=SDescription></td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Myna.Sandbox.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.Myna.Sandbox" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">Myna.<span class=HB> </span>Sandbox</a></td><td class=SDescription>Constructor function for Sandbox class</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.throw" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">throw</a></td><td class=SDescription><b>Class function</b> Throws a sandbox exception, also known as a sandbox violation.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.Myna.Sandbox.getCurrent" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>getCurrent</a></td><td class=SDescription><b>Class function</b> returns the currently executing sandbox or null if no sandboxes are currently executing.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.Myna.Sandbox.bypass" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>bypass</a></td><td class=SDescription><b>Class function</b> bypasses all sandboxes for the duration of a function.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.Myna.Sandbox.bypassFn" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>bypassFn</a></td><td class=SDescription><b>Class function</b> wraps a function in a sandbox bypass</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.Myna.Sandbox.isDebugMode" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>isDebugMode</a></td><td class=SDescription><b>Class Function</b> returns true if the current MynThread is in sandbox debug mode.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Myna.Sandbox.Properties" >Properties</a></td><td class=SDescription></td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.whitelist" >whitelist</a></td><td class=SDescription><b>regex[]</b> to whitelist Java classes.</td></tr><tr class="SProperty SIndent2"><td class=SEntry><a href="#Myna.Sandbox.debug" >debug</a></td><td class=SDescription><b>boolean, default false</b> indicates whether this sandbox should execute in debug mode. </td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.sandboxRules" >sandboxRules</a></td><td class=SDescription>Array of sandbox whitelist rules. </td></tr><tr class="SProperty SIndent2"><td class=SEntry><a href="#Myna.Sandbox.scope" >scope</a></td><td class=SDescription>Object that represents the global scope within the sandbox. </td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.classPropertyWhitelist" >classPropertyWhitelist</a></td><td class=SDescription>Object that contains property whitelists for java classes within the sandbox. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Myna.Sandbox.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.globalBefore" >globalBefore</a></td><td class=SDescription><b>Override</b> function to be executed before every function call and property access in a proxied Java object</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.globalAfter" >globalAfter</a></td><td class=SDescription><b>Override</b> function to be executed after every function call and property access in a proxied object</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.onSandboxException" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">onSandboxException</a></td><td class=SDescription><b>Override</b> global violation exception handler for this sandbox;</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.addScopeObjects" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">addScopeObjects</a></td><td class=SDescription>Add one or more properties to the sandbox scope</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.addProxyDef" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">addProxyDef</a></td><td class=SDescription>Add an override for specific functions and properties for a Java class. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.addWhitelistClass" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">addWhitelistClass</a></td><td class=SDescription>Adds a class regex to the sandbox&rsquo;s whitelist</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.addWhitelistProperty" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">addWhitelistProperty</a></td><td class=SDescription>Adds a class property regex to the sandbox&rsquo;s whitelist</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.createJavaProxy" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">createJavaProxy</a></td><td class=SDescription>Wraps an object with a proxy object that enforces the sandbox&rsquo;s property permissions.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.executeString" id=link13 onMouseOver="ShowTip(event, 'tt13', 'link13')" onMouseOut="HideTip('tt13')">executeString</a></td><td class=SDescription>Executes a JS string in the sandbox</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.executePath" id=link14 onMouseOver="ShowTip(event, 'tt14', 'link14')" onMouseOut="HideTip('tt14')">executePath</a></td><td class=SDescription>Executes the code stored in the supplied MynaPath, in the sandbox</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.Sandbox.importFromFile" id=link15 onMouseOver="ShowTip(event, 'tt15', 'link15')" onMouseOut="HideTip('tt15')">importFromFile</a></td><td class=SDescription>Imports proxy rules from a rules file.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.Sandbox.wrapFunction" id=link16 onMouseOver="ShowTip(event, 'tt16', 'link16')" onMouseOut="HideTip('tt16')">wrapFunction</a></td><td class=SDescription>wraps a function in a sandbox bypass, and proxies any Java objects returned when called.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div>

<div class="CGeneric CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Examples"></a>Examples</h3><div class=CBody><blockquote><pre class="CCode sh_myna">var sandbox = new Myna.Sandbox({<br>    whitelist:[<br>        /^java\.net\.URL$/,<br>        /^java\.net\.URLConnection$/,<br>        /^java\.io\.InputStream$/<br>    ]<br><br>});<br>// Per-class property whitelists<br>    // see the &quot;options.file&quot; constructor property and &quot;importFromFile&quot;<br>    // function for a more compact way to define class and property<br>    // whitelists<br><br>sandbox.addWhitelistProperty(<br>    /^java\.net\.URL$/<br>    /openConnection/<br>);<br>sandbox.addWhitelistProperty(<br>    /^java\.net\.URLConnection$/<br>    /getInputStream/<br>);<br>sandbox.addWhitelistProperty(<br>    /^java\.io\.InputStream$/<br>    /^.*$/<br>);<br><br>sandbox.addProxyDef(/java.net.Url/,{<br>    properties:{<br>        openConnection:{<br>            beforeFn:function (proxy) {<br>                if (proxy){<br>                    //disallow proxies<br>                    Myna.Sandbox.throw(&quot;URL:openConnection cannot be called with a proxy&quot;)<br>                }<br>            }<br>        }<br>    }<br>});<br><br>//This sets what will be visible in the parent scope of the code executed<br>//in the sandbox<br>sandbox.addScopeObjects(<br>    {<br>        website:new java.net.URL(&quot;http://goodsite.com&quot;),<br>        log:log,<br>        error:error,<br>        savePage:savePage<br>    }<br>)<br><br>// good for code that is non-interactive, or places results in it's<br>// global scope<br>sandbox.executePath(&quot;/scripts/somescript.sjs&quot;)<br>var result1 = sandbox.scope.someResultValue;<br><br>//good for loading a script library, and the executing a function<br>result2 = sandbox.executePath(<br>    &quot;/scripts/somescript.sjs&quot;,<br>    &quot;doStuff&quot;,<br>    [arg1,arg2]<br>);<br><br>//can also execute arbitrary strings. Just pass a &quot;path&quot; for error messages<br>result3 = sandbox.executeString(<br>    mySandboxedCode,<br>    &quot;dynamic_code_{0}.sjs&quot;.format(runId),<br>    &quot;doStuff&quot;,<br>    [arg1,arg2]<br>);</pre></blockquote></div></div>

<div class="CGroup CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Functions"></a>Functions</h3></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Myna.Sandbox"></a>Myna.<span class=HB> </span>Sandbox</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox = function(</td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Constructor function for Sandbox class</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>options</td><td class=CDLDescription>Object that describes the options for this connection.&nbsp; See <b>Options</b> below.</td></tr></table><h4 class=CHeading>Options</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>whitelist</td><td class=CDLDescription><b>Optional, default []</b> regex whilelist of classes explicitly allowed in this sandbox.&nbsp; This can also be set via  <u>file</u> option to the constructor, or later via <a href="#Myna.Sandbox.importFromFile" class=LFunction id=link17 onMouseOver="ShowTip(event, 'tt15', 'link17')" onMouseOut="HideTip('tt15')">importFromFile</a> This can be a single string (&ldquo;^java.net.URL$&rdquo;) a single regex (/^java.net.URL$/) or an array of either type [&ldquo;^java.net.URL$&rdquo;, /^java.net.URLConnection$/]</td></tr><tr><td class=CDLEntry>file</td><td class=CDLDescription><b>Optional</b> <a href="MynaPath-txt.html#MynaPath" class=LGeneric id=link18 onMouseOver="ShowTip(event, 'tt17', 'link18')" onMouseOut="HideTip('tt17')">MynaPath</a> or <a href="File-sjs.html#Myna.File" class=LClass id=link19 onMouseOver="ShowTip(event, 'tt18', 'link19')" onMouseOut="HideTip('tt18')">Myna.File</a> pointing to a proxy ruleset file.&nbsp; This will be merged with whitelist, but is really intended as an alternative way of setting the whitelisted classes and properties.&nbsp; See <a href="#Myna.Sandbox.importFromFile" class=LFunction id=link20 onMouseOver="ShowTip(event, 'tt15', 'link20')" onMouseOut="HideTip('tt15')">importFromFile</a> for file format</td></tr><tr><td class=CDLEntry>debug</td><td class=CDLDescription><b>Optional, default false</b> If true, then the server will be placed in a sandbox debug mode while executing code.&nbsp; This will result in the <a href="#Myna.Sandbox.sandboxRules" class=LProperty id=link21 onMouseOver="ShowTip(event, 'tt19', 'link21')" onMouseOut="HideTip('tt19')">sandboxRules</a> property being set to an array of rule strings appropriate for adding to a proxy ruleset file that can be included with <a href="#Myna.Sandbox.importFromFile" class=LFunction id=link22 onMouseOver="ShowTip(event, 'tt15', 'link22')" onMouseOut="HideTip('tt15')">importFromFile</a></td></tr><tr><td class=CDLEntry>mynaStandardObjects</td><td class=CDLDescription><b>Optional, default false</b> Normally, only JavaScript standard objects are included in the sandbox scope.&nbsp; Setting this property to true allows access to the &ldquo;web-safe&rdquo; Myna functions as well (see list below).</td></tr></table><h4 class=CHeading>Myna Standard Objects</h4><ul class=CBulletList><li><a href="Number-js.html#Number" class=LClass id=link23 onMouseOver="ShowTip(event, 'tt20', 'link23')" onMouseOut="HideTip('tt20')">Number</a></li><li><a href="Array-js.html#Array" class=LClass id=link24 onMouseOver="ShowTip(event, 'tt21', 'link24')" onMouseOut="HideTip('tt21')">Array</a></li><li><a href="ObjectLib-js.html#ObjectLib" class=LClass id=link25 onMouseOver="ShowTip(event, 'tt22', 'link25')" onMouseOut="HideTip('tt22')">ObjectLib</a></li><li><a href="Object-js.html#Object" class=LClass id=link26 onMouseOver="ShowTip(event, 'tt23', 'link26')" onMouseOut="HideTip('tt23')">Object</a></li><li><a href="String-js.html#String" class=LClass id=link27 onMouseOver="ShowTip(event, 'tt24', 'link27')" onMouseOut="HideTip('tt24')">String</a></li><li><a href="Function-js.html#Function" class=LClass id=link28 onMouseOver="ShowTip(event, 'tt25', 'link28')" onMouseOut="HideTip('tt25')">Function</a></li><li><a href="Date-js.html#Date" class=LClass id=link29 onMouseOver="ShowTip(event, 'tt26', 'link29')" onMouseOut="HideTip('tt26')">Date</a></li><li><a href="ValidationResult-js.html#Myna.ValidationResult" class=LClass id=link30 onMouseOver="ShowTip(event, 'tt27', 'link30')" onMouseOut="HideTip('tt27')">Myna.ValidationResult</a></li><li><a href="Validation-js.html#Myna.Validation" class=LClass id=link31 onMouseOver="ShowTip(event, 'tt28', 'link31')" onMouseOut="HideTip('tt28')">Myna.Validation</a></li><li><a href="Profiler-js.html#Myna.Profiler" class=LClass id=link32 onMouseOver="ShowTip(event, 'tt29', 'link32')" onMouseOut="HideTip('tt29')">Myna.Profiler</a></li><li><a href="DataSet-js.html#Myna.DataSet" class=LClass id=link33 onMouseOver="ShowTip(event, 'tt30', 'link33')" onMouseOut="HideTip('tt30')">Myna.DataSet</a></li><li><a href="Inflector-js.html#Myna.Inflector" class=LClass id=link34 onMouseOver="ShowTip(event, 'tt31', 'link34')" onMouseOut="HideTip('tt31')">Myna.Inflector</a></li><li><a href="standard_objects/profiler-sjs.html#$profiler" class=LGlobalVariable id=link35 onMouseOver="ShowTip(event, 'tt32', 'link35')" onMouseOut="HideTip('tt32')">$profiler</a></li></ul><h4 class=CHeading>Returns</h4><p class=CParagraph>a Sandbox instance</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.throw"></a>throw</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.throw = function(</td><td class=PParameter nowrap>msg,</td></tr><tr><td></td><td class=PParameter nowrap>className,</td></tr><tr><td></td><td class=PParameter nowrap>property</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph><b>Class function</b> Throws a sandbox exception, also known as a sandbox violation.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>msg</td><td class=CDLDescription><b>String</b> message regarding this error.</td></tr><tr><td class=CDLEntry>className</td><td class=CDLDescription><b>Optional</b> <b>String</b> If this error could have been prevented by whitelisting a class, this should contain the appropriate String class name</td></tr><tr><td class=CDLEntry>property</td><td class=CDLDescription><b>Optional</b> <b>String</b> If this error could have been prevented by whitelisting a class and property, this should contain the appropriate String property name</td></tr></table><h4 class=CHeading>Detail</h4><p class=CParagraph>This will unwind the stack back to the sandbox execution call and cannot be captured from within the sandbox code.&nbsp; However this can be caught outside the sandbox.&nbsp; This is useful for proxyDefs with custom function handler, e.g. throwing errors on certain types of input.&nbsp; These can also be handled globally via <a href="#Myna.Sandbox.onSandboxException" class=LFunction id=link36 onMouseOver="ShowTip(event, 'tt7', 'link36')" onMouseOut="HideTip('tt7')">onSandboxException</a></p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Myna.Sandbox.getCurrent"></a>Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>getCurrent</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.Sandbox.getCurrent = function()</td></tr></table></blockquote><p class=CParagraph><b>Class function</b> returns the currently executing sandbox or null if no sandboxes are currently executing.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Myna.Sandbox.bypass"></a>Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>bypass</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.bypass = function(</td><td class=PParameter nowrap>fun</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph><b>Class function</b> bypasses all sandboxes for the duration of a function.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>fun</td><td class=CDLDescription>function to execute outside the sandbox</td></tr></table><h4 class=CHeading>example</h4><blockquote><pre class="CCode sh_myna">sandbox.globalAfter = function () {<br>    Myna.Sandbox.bypass(function () {<br>        new Myna.File(&quot;log&quot;).appendString(<br>            &quot;accessed property &quot; + chain.array.propertyName<br>        );<br>    })<br><br>    return arguments.callee.chain.lastReturn;<br>}</pre></blockquote><h4 class=CHeading>See Also</h4><ul class=CBulletList><li><a href="#Myna.Sandbox.Myna.Sandbox.bypassFn" class=LFunction id=link37 onMouseOver="ShowTip(event, 'tt5', 'link37')" onMouseOut="HideTip('tt5')">Myna.Sandbox.bypassFn</a></li></ul></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Myna.Sandbox.bypassFn"></a>Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>bypassFn</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.bypassFn = function(</td><td class=PParameter nowrap>fun</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph><b>Class function</b> wraps a function in a sandbox bypass</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>fun</td><td class=CDLDescription>function to wrap</td></tr></table><h4 class=CHeading>example</h4><blockquote><pre class="CCode sh_myna">var newScope={};<br>newScope.log =Myna.Sandbox.bypassFn(function (text,type) {<br>    new Myna.File(&quot;log&quot;).appendString(<br>        &quot;[{0}] {1}: {2}&quot;.format(<br>            new Date.format(&quot;Y-m-d H:i:s&quot;),<br>            type||&quot;debug&quot;,<br>            text<br>        )<br>    );<br>})<br><br>sandbox.addScopeObjects(newScope);</pre></blockquote><h4 class=CHeading>See Also</h4><ul class=CBulletList><li><a href="#Myna.Sandbox.Myna.Sandbox.bypass" class=LFunction id=link38 onMouseOver="ShowTip(event, 'tt4', 'link38')" onMouseOut="HideTip('tt4')">Myna.Sandbox.bypass</a></li></ul></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Myna.Sandbox.isDebugMode"></a>Myna.<span class=HB> </span>Sandbox.<span class=HB> </span>isDebugMode</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.Sandbox.isDebugMode = function ()</td></tr></table></blockquote><p class=CParagraph><b>Class Function</b> returns true if the current MynThread is in sandbox debug mode.</p><p class=CParagraph>See <a href="#Myna.Sandbox.debug" class=LProperty id=link39 onMouseOver="ShowTip(event, 'tt33', 'link39')" onMouseOut="HideTip('tt33')">debug</a></p></div></div>

<div class="CGroup CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Properties"></a>Properties</h3></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="Myna.Sandbox.whitelist"></a>whitelist</h3><div class=CBody><p class=CParagraph><b>regex[]</b> to whitelist Java classes.</p><p class=CParagraph>This is normally set in the constructor or a rules file</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">/^java\.net\.\w+$/</pre></blockquote></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="Myna.Sandbox.debug"></a>debug</h3><div class=CBody><p class=CParagraph><b>boolean, default false</b> indicates whether this sandbox should execute in debug mode.&nbsp; In debug mode, sandbox violations do not result in errors but rather get logged as type &ldquo;sandbox&rdquo; and write the rules necessary to whitelist the access to <a href="#Myna.Sandbox.sandboxRules" class=LProperty id=link40 onMouseOver="ShowTip(event, 'tt19', 'link40')" onMouseOut="HideTip('tt19')">sandboxRules</a>.&nbsp; This is helpful for debugging and for gathering baseline rules.</p><p class=CParagraph>This can be set in the constructor</p></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="Myna.Sandbox.sandboxRules"></a>sandboxRules</h3><div class=CBody><p class=CParagraph>Array of sandbox whitelist rules.&nbsp; These are generated when sandbox exceptions are raised in <a href="#Myna.Sandbox.debug" class=LProperty id=link41 onMouseOver="ShowTip(event, 'tt33', 'link41')" onMouseOut="HideTip('tt33')">debug</a> mode.&nbsp; These are strings that can be appended a proxy rules file, and imported via <a href="#Myna.Sandbox.importFromFile" class=LFunction id=link42 onMouseOver="ShowTip(event, 'tt15', 'link42')" onMouseOut="HideTip('tt15')">importFromFile</a> or the <u>file</u> constructor parameter.</p></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="Myna.Sandbox.scope"></a>scope</h3><div class=CBody><p class=CParagraph>Object that represents the global scope within the sandbox.&nbsp; This can only be modified via <a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link43 onMouseOver="ShowTip(event, 'tt8', 'link43')" onMouseOut="HideTip('tt8')">addScopeObjects</a>, but can be read to view objects created within the sandbox</p></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="Myna.Sandbox.classPropertyWhitelist"></a>classPropertyWhitelist</h3><div class=CBody><p class=CParagraph>Object that contains property whitelists for java classes within the sandbox.&nbsp; This should only be modified via &lt;addWhitelistPropery&gt; or via a rules file</p></div></div>

<div class="CGroup CTopic"><h3 class=CTitle><a name="Myna.Sandbox.Functions"></a>Functions</h3></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.globalBefore"></a>globalBefore</h3><div class=CBody><p class=CParagraph><b>Override</b> function to be executed before every function call and property access in a proxied Java object</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>various</td><td class=CDLDescription>For wrapped functions, these will be the parameters to the underlying function.&nbsp; For property access there are no parameters</td></tr></table><h4 class=CHeading>Special variables</h4><p class=CParagraph>This will be called in a chain along with any other interceptor functions as per <a href="Function-js.html#Function.createChainFunction" class=LFunction id=link44 onMouseOver="ShowTip(event, 'tt34', 'link44')" onMouseOut="HideTip('tt34')">Function.createChainFunction</a>.&nbsp; The name of the property or function being accessed can be found in</p><p class=CParagraph><u>arguments.callee.chain.array.propertyName</u></p><p class=CParagraph>Also, like all chain functions, you can find the last returned value in</p><p class=CParagraph>This is useful for global input filtering for all proxied functions.</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">sandbox.globalBefore = function () {<br>    var chain = arguments.callee.chain;<br>    //alter arguments to next function in the chain<br>    chain.args = chain.args.map(function (arg) {<br>        if(arg &amp;&amp; typeof arg == &quot;string&quot;){<br>            //escape HTML to prevent XSS attacks<br>            return String(arg).escapeHtml();<br>        } else {<br>            return arg;<br>        }<br>    })<br><br>}</pre></blockquote><h4 class=CHeading>See</h4><ul class=CBulletList><li><a href="#Myna.Sandbox.createJavaProxy" class=LFunction id=link45 onMouseOver="ShowTip(event, 'tt12', 'link45')" onMouseOut="HideTip('tt12')">createJavaProxy</a></li><li><a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link46 onMouseOver="ShowTip(event, 'tt8', 'link46')" onMouseOut="HideTip('tt8')">addScopeObjects</a></li><li><a href="Function-js.html#Function.createChainFunction" class=LFunction id=link47 onMouseOver="ShowTip(event, 'tt34', 'link47')" onMouseOut="HideTip('tt34')">Function.createChainFunction</a></li><li><a href="#Myna.Sandbox.Myna.Sandbox.bypass" class=LFunction id=link48 onMouseOver="ShowTip(event, 'tt4', 'link48')" onMouseOut="HideTip('tt4')">Myna.Sandbox.bypass</a></li><li><a href="#Myna.Sandbox.Myna.Sandbox.bypassFn" class=LFunction id=link49 onMouseOver="ShowTip(event, 'tt5', 'link49')" onMouseOut="HideTip('tt5')">Myna.Sandbox.bypassFn</a></li></ul></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.globalAfter"></a>globalAfter</h3><div class=CBody><p class=CParagraph><b>Override</b> function to be executed after every function call and property access in a proxied object</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>various</td><td class=CDLDescription>For wrapped functions, these will be the parameters to the underlying function.&nbsp; For property access there are no parameters</td></tr></table><h4 class=CHeading>Special variables</h4><p class=CParagraph>This will be called in a chain along with any other interceptor functions as per <a href="Function-js.html#Function.createChainFunction" class=LFunction id=link50 onMouseOver="ShowTip(event, 'tt34', 'link50')" onMouseOut="HideTip('tt34')">Function.createChainFunction</a>.&nbsp; The name of property or function being accessed can be found in</p><p class=CParagraph><u>arguments.callee.chain.array.propertyName</u></p><p class=CParagraph>Also, like all chain functions, you can find the last returned value in</p><p class=CParagraph><u>arguments.callee.chain.lastReturn</u></p><p class=CParagraph>This value should be returned from any &ldquo;after&rdquo; functions unless altering return value is intended.</p><p class=CParagraph>This is useful for global output filtering for all proxied functions.</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">sandbox.globalAfter = function () {<br>    Myna.Sandbox.bypass(function () {<br>        new Myna.File(&quot;log&quot;).appendString(<br>            &quot;accessed property &quot; + chain.array.propertyName<br>        );<br>    })<br><br>    return arguments.callee.chain.lastReturn;<br>}</pre></blockquote><h4 class=CHeading>See</h4><ul class=CBulletList><li><a href="#Myna.Sandbox.createJavaProxy" class=LFunction id=link51 onMouseOver="ShowTip(event, 'tt12', 'link51')" onMouseOut="HideTip('tt12')">createJavaProxy</a></li><li><a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link52 onMouseOver="ShowTip(event, 'tt8', 'link52')" onMouseOut="HideTip('tt8')">addScopeObjects</a></li><li><a href="Function-js.html#Function.createChainFunction" class=LFunction id=link53 onMouseOver="ShowTip(event, 'tt34', 'link53')" onMouseOut="HideTip('tt34')">Function.createChainFunction</a></li><li><a href="#Myna.Sandbox.Myna.Sandbox.bypass" class=LFunction id=link54 onMouseOver="ShowTip(event, 'tt4', 'link54')" onMouseOut="HideTip('tt4')">Myna.Sandbox.bypass</a></li><li><a href="#Myna.Sandbox.Myna.Sandbox.bypassFn" class=LFunction id=link55 onMouseOver="ShowTip(event, 'tt5', 'link55')" onMouseOut="HideTip('tt5')">Myna.Sandbox.bypassFn</a></li></ul></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.onSandboxException"></a>onSandboxException</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.Sandbox.prototype.onSandboxException=function ()</td></tr></table></blockquote><p class=CParagraph><b>Override</b> global violation exception handler for this sandbox;</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>exception</td><td class=CDLDescription>sandbox exception object</td></tr></table><p class=CParagraph>This is only called for sandbox violations.&nbsp; By default it returns false.&nbsp; This function should be overridden for custom sandbox exception handling.</p><p class=CParagraph>Override functions can return boolean true to suppress this exception.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.addScopeObjects"></a>addScopeObjects</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addScopeObjects = function(</td><td class=PParameter nowrap>objectStruct</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Add one or more properties to the sandbox scope</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>objectStruct</td><td class=CDLDescription>JS object where each property should a be a top-level property or function in the sandbox scope</td></tr></table><h4 class=CHeading>Detail</h4><p class=CParagraph>each property  in <u>objectStruct</u> will be merged into the sandbox&rsquo;s <a href="#Myna.Sandbox.scope" class=LProperty id=link56 onMouseOver="ShowTip(event, 'tt35', 'link56')" onMouseOut="HideTip('tt35')">scope</a>, based on type:</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>functions</td><td class=CDLDescription>Wrapped in a sandbox escape (see &lt;Myna.sandbox.bypassFn&gt;).&nbsp; This means the sandbox class restrictions will not apply</td></tr><tr><td class=CDLEntry>arrays</td><td class=CDLDescription>Copied as new array, and each item passed again to <a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link57 onMouseOver="ShowTip(event, 'tt8', 'link57')" onMouseOut="HideTip('tt8')">addScopeObjects</a></td></tr><tr><td class=CDLEntry>plain JS objects</td><td class=CDLDescription>Copied as new object, and each member passed again to <a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link58 onMouseOver="ShowTip(event, 'tt8', 'link58')" onMouseOut="HideTip('tt8')">addScopeObjects</a></td></tr><tr><td class=CDLEntry>dates</td><td class=CDLDescription>Cloned as new Date object</td></tr><tr><td class=CDLEntry>Java objects</td><td class=CDLDescription>Passed to <a href="#Myna.Sandbox.createJavaProxy" class=LFunction id=link59 onMouseOver="ShowTip(event, 'tt12', 'link59')" onMouseOut="HideTip('tt12')">createJavaProxy</a> before assigning</td></tr></table><h4 class=CHeading>Note</h4><p class=CParagraph>Information from the sandbox&rsquo;s settings is used by <a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link60 onMouseOver="ShowTip(event, 'tt8', 'link60')" onMouseOut="HideTip('tt8')">addScopeObjects</a> to construct the sandbox scope.&nbsp; This means that this function should be called after all other sandbox configuration.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.addProxyDef"></a>addProxyDef</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addProxyDef =function(</td><td class=PParameter nowrap>classPattern,</td></tr><tr><td></td><td class=PParameter nowrap>settings</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Add an override for specific functions and properties for a Java class.&nbsp; This overrides any generic white-listing provided via <a href="#Myna.Sandbox.addWhitelistProperty" class=LFunction id=link61 onMouseOver="ShowTip(event, 'tt11', 'link61')" onMouseOut="HideTip('tt11')">addWhitelistProperty</a>.&nbsp; Useful for altering input or output or conditional restrictions</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>classPattern</td><td class=CDLDescription>className regex to apply these <u>settings</u> to</td></tr><tr><td class=CDLEntry>settings</td><td class=CDLDescription>settings Object definition.&nbsp; See &ldquo;Settings&rdquo; below</td></tr></table><h4 class=CHeading>Settings</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>propertyWhitelist</td><td class=CDLDescription><b>Optional, default []</b>:tuple.value, Regex list of properties that are accessible.</td></tr><tr><td class=CDLEntry>beforeFn</td><td class=CDLDescription><b>Optional, default null</b> Function to run before accessing a property, or running a function.&nbsp; This runs after the <a href="#Myna.Sandbox.globalBefore" class=LFunction id=link62 onMouseOver="ShowTip(event, 'tt36', 'link62')" onMouseOut="HideTip('tt36')">globalBefore</a></td></tr><tr><td class=CDLEntry>afterFn</td><td class=CDLDescription>Function to run after accessing a property, or running a function.&nbsp; This runs before the <a href="#Myna.Sandbox.globalAfter" class=LFunction id=link63 onMouseOver="ShowTip(event, 'tt37', 'link63')" onMouseOut="HideTip('tt37')">globalAfter</a></td></tr></table></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.addWhitelistClass"></a>addWhitelistClass</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addWhitelistClass =function(</td><td class=PParameter nowrap>classRegex</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Adds a class regex to the sandbox&rsquo;s whitelist</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>classRegex</td><td class=CDLDescription><b>RegeExp</b> regex to add</td></tr></table><p class=CParagraph>This allows Java classes that match this regex to be created within the sandbox.&nbsp; This can also be set via a rules file in the constructor.</p><h4 class=CHeading>Note</h4><p class=CParagraph>By default no properties of these classes can be accessed within the sandbox.&nbsp; See <a href="#Myna.Sandbox.addWhitelistProperty" class=LFunction id=link64 onMouseOver="ShowTip(event, 'tt11', 'link64')" onMouseOut="HideTip('tt11')">addWhitelistProperty</a></p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">sandbox.addWhitelistClass(/^java\.net\.URL$/)</pre></blockquote></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.addWhitelistProperty"></a>addWhitelistProperty</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addWhitelistProperty =function(</td><td class=PParameter nowrap>classRegex,</td></tr><tr><td></td><td class=PParameter nowrap>propertyRegex</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Adds a class property regex to the sandbox&rsquo;s whitelist</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>classRegex</td><td class=CDLDescription><b>RegeExp</b> regex of className to apply</td></tr><tr><td class=CDLEntry>propertyRegex</td><td class=CDLDescription><b>RegeExp</b> regex of property name to apply</td></tr></table><p class=CParagraph>This can also be set via a rules file in the constructor</p><h4 class=CHeading>Note</h4><p class=CParagraph>This will also call <a href="#Myna.Sandbox.addWhitelistClass" class=LFunction id=link65 onMouseOver="ShowTip(event, 'tt10', 'link65')" onMouseOut="HideTip('tt10')">addWhitelistClass</a> using the <u>classRegex</u></p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">sandbox.addWhitelistProperty(/^java\.net\.URL$/,/^toString$/)</pre></blockquote></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.createJavaProxy"></a>createJavaProxy</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.createJavaProxy = function(</td><td class=PParameter nowrap>obj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Wraps an object with a proxy object that enforces the sandbox&rsquo;s property permissions.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>obj</td><td class=CDLDescription>object to wrap.&nbsp; If this is not a valid Java Object, or if it is already a Java object proxy, it will be returned unaltered</td></tr></table><p class=CParagraph>This is called automatically inside <a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link66 onMouseOver="ShowTip(event, 'tt8', 'link66')" onMouseOut="HideTip('tt8')">addScopeObjects</a> when a Java object is encountered.</p><h4 class=CHeading>See</h4><ul class=CBulletList><li><a href="#Myna.Sandbox.addProxyDef" class=LFunction id=link67 onMouseOver="ShowTip(event, 'tt9', 'link67')" onMouseOut="HideTip('tt9')">addProxyDef</a></li><li><a href="#Myna.Sandbox.addWhitelistProperty" class=LFunction id=link68 onMouseOver="ShowTip(event, 'tt11', 'link68')" onMouseOut="HideTip('tt11')">addWhitelistProperty</a></li><li><a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link69 onMouseOver="ShowTip(event, 'tt8', 'link69')" onMouseOut="HideTip('tt8')">addScopeObjects</a></li></ul></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.executeString"></a>executeString</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.executeString = function(</td><td class=PParameter nowrap>string,</td></tr><tr><td></td><td class=PParameter nowrap>path,</td></tr><tr><td></td><td class=PParameter nowrap>functionName,</td></tr><tr><td></td><td class=PParameter nowrap>args</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Executes a JS string in the sandbox</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>string</td><td class=CDLDescription>Code to execute</td></tr><tr><td class=CDLEntry>path</td><td class=CDLDescription>path to .js or .sjs file to execute within the sandbox</td></tr><tr><td class=CDLEntry>functionName</td><td class=CDLDescription><b>Optional, default undefined</b> <b>String</b> If defined, this is the name of a function to execute after loading the script into the sandbox</td></tr><tr><td class=CDLEntry>arg</td><td class=CDLDescription><b>Optional, default undefined</b> <b>Array</b> If defined, and array of arguments to pass to the function</td></tr></table><h4 class=CHeading>Returns</h4><p class=CParagraph>result of <u>functionName</u> or undefined</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.executePath"></a>executePath</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.executePath = function(</td><td class=PParameter nowrap>path,</td></tr><tr><td></td><td class=PParameter nowrap>functionName,</td></tr><tr><td></td><td class=PParameter nowrap>args</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Executes the code stored in the supplied MynaPath, in the sandbox</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>path</td><td class=CDLDescription>path to .js or .sjs file to execute within the sandbox</td></tr><tr><td class=CDLEntry>functionName</td><td class=CDLDescription><b>Optional, default undefined</b> <b>String</b> If defined, this is the name of a function to execute after loading the script into the sandbox</td></tr><tr><td class=CDLEntry>arg</td><td class=CDLDescription><b>Optional, default undefined</b> <b>Array</b> If defined, and array of arguments to pass to the function</td></tr></table><h4 class=CHeading>Returns</h4><p class=CParagraph>result of <u>functionName</u> or undefined.</p><p class=CParagraph>See: <a href="#Myna.Sandbox.executeString" class=LFunction id=link70 onMouseOver="ShowTip(event, 'tt13', 'link70')" onMouseOut="HideTip('tt13')">executeString</a></p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.importFromFile"></a>importFromFile</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.importFromFile =function(</td><td class=PParameter nowrap>file</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Imports proxy rules from a rules file.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>file</td><td class=CDLDescription><a href="MynaPath-txt.html#MynaPath" class=LGeneric id=link71 onMouseOver="ShowTip(event, 'tt17', 'link71')" onMouseOut="HideTip('tt17')">MynaPath</a> or <a href="File-sjs.html#Myna.File" class=LClass id=link72 onMouseOver="ShowTip(event, 'tt18', 'link72')" onMouseOut="HideTip('tt18')">Myna.File</a> instance</td></tr></table><p class=CParagraph>Proxy rules files are text files with entries whitelisting classes and class properties.&nbsp; Each rule is terminated by a line break</p><p class=CParagraph>Class rules consist of the text &ldquo;class:&rdquo; followed by a regular expression describing the classname.</p><blockquote><pre class="CCode sh_myna">class:java.util.Collections\$UnmodifiableRandomAccessList<br>class:java\.util\.ArrayList</pre></blockquote><p class=CParagraph>Property rules consist of the text &ldquo;property:&rdquo; followed by a regular expression describing the classname, followd by &ldquo;:&rdquo; and then a regular expression describing the property name</p><blockquote><pre class="CCode sh_myna">property:java\.util\.ArrayList:toArray<br>property:java\.util\.ArrayList:toString<br>property:java\.util\.Collections\$UnmodifiableRandomAccessList:get<br>property:java\.util\.Collections\$UnmodifiableRandomAccessList:size</pre></blockquote><p class=CParagraph>This can be used from the constructor by passing the <u>file</u> option</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.Sandbox.wrapFunction"></a>wrapFunction</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.wrapFunction = function(</td><td class=PParameter nowrap>f</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>wraps a function in a sandbox bypass, and proxies any Java objects returned when called.</p><p class=CParagraph>This is normally called from within <a href="#Myna.Sandbox.addScopeObjects" class=LFunction id=link73 onMouseOver="ShowTip(event, 'tt8', 'link73')" onMouseOut="HideTip('tt8')">addScopeObjects</a></p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>f</td><td class=CDLDescription>function reference to wrap</td></tr></table></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->






<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox = function(</td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Constructor function for Sandbox class</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.throw = function(</td><td class=PParameter nowrap>msg,</td></tr><tr><td></td><td class=PParameter nowrap>className,</td></tr><tr><td></td><td class=PParameter nowrap>property</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><b>Class function</b> Throws a sandbox exception, also known as a sandbox violation.</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.Sandbox.getCurrent = function()</td></tr></table></blockquote><b>Class function</b> returns the currently executing sandbox or null if no sandboxes are currently executing.</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.bypass = function(</td><td class=PParameter nowrap>fun</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><b>Class function</b> bypasses all sandboxes for the duration of a function.</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.bypassFn = function(</td><td class=PParameter nowrap>fun</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><b>Class function</b> wraps a function in a sandbox bypass</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.Sandbox.isDebugMode = function ()</td></tr></table></blockquote><b>Class Function</b> returns true if the current MynThread is in sandbox debug mode.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.Sandbox.prototype.onSandboxException=function ()</td></tr></table></blockquote><b>Override</b> global violation exception handler for this sandbox;</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addScopeObjects = function(</td><td class=PParameter nowrap>objectStruct</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Add one or more properties to the sandbox scope</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addProxyDef =function(</td><td class=PParameter nowrap>classPattern,</td></tr><tr><td></td><td class=PParameter nowrap>settings</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Add an override for specific functions and properties for a Java class. </div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addWhitelistClass =function(</td><td class=PParameter nowrap>classRegex</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Adds a class regex to the sandbox&rsquo;s whitelist</div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.addWhitelistProperty =function(</td><td class=PParameter nowrap>classRegex,</td></tr><tr><td></td><td class=PParameter nowrap>propertyRegex</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Adds a class property regex to the sandbox&rsquo;s whitelist</div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.createJavaProxy = function(</td><td class=PParameter nowrap>obj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Wraps an object with a proxy object that enforces the sandbox&rsquo;s property permissions.</div></div><div class=CToolTip id="tt13"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.executeString = function(</td><td class=PParameter nowrap>string,</td></tr><tr><td></td><td class=PParameter nowrap>path,</td></tr><tr><td></td><td class=PParameter nowrap>functionName,</td></tr><tr><td></td><td class=PParameter nowrap>args</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Executes a JS string in the sandbox</div></div><div class=CToolTip id="tt14"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.executePath = function(</td><td class=PParameter nowrap>path,</td></tr><tr><td></td><td class=PParameter nowrap>functionName,</td></tr><tr><td></td><td class=PParameter nowrap>args</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Executes the code stored in the supplied MynaPath, in the sandbox</div></div><div class=CToolTip id="tt15"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.importFromFile =function(</td><td class=PParameter nowrap>file</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Imports proxy rules from a rules file.</div></div><div class=CToolTip id="tt16"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.Sandbox.prototype.wrapFunction = function(</td><td class=PParameter nowrap>f</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>wraps a function in a sandbox bypass, and proxies any Java objects returned when called.</div></div><div class=CToolTip id="tt17"><div class=CGeneric>A MynaPath is a file URI String with certain automatic translations.</div></div><div class=CToolTip id="tt18"><div class=CClass>A Javascript friendly proxy for java.io.File</div></div><div class=CToolTip id="tt19"><div class=CProperty>Array of sandbox whitelist rules. </div></div><div class=CToolTip id="tt20"><div class=CClass>Myna extensions to the JavaScript Number object</div></div><div class=CToolTip id="tt21"><div class=CClass>Additional functions on the JS Array object</div></div><div class=CToolTip id="tt22"><div class=CClass>Additional object related functions</div></div><div class=CToolTip id="tt23"><div class=CClass>Additional functions on the JS Object object</div></div><div class=CToolTip id="tt24"><div class=CClass>Additional functions on the JS String object</div></div><div class=CToolTip id="tt25"><div class=CClass>Additional functions on the JS Function object</div></div><div class=CToolTip id="tt26"><div class=CClass>This date class adapted from http://code.google.com/p/flexible-js-formatting/.</div></div><div class=CToolTip id="tt27"><div class=CClass>Stores the results of one or more validation operations</div></div><div class=CToolTip id="tt28"><div class=CClass>A store for validation functions that can be used to validate objects</div></div><div class=CToolTip id="tt29"><div class=CClass>Stores execution times between begin() and end() functions</div></div><div class=CToolTip id="tt30"><div class=CClass>A specialized array for working with tabular data</div></div><div class=CToolTip id="tt31"><div class=CClass>Static class for converting English words to plural and singular forms</div></div><div class=CToolTip id="tt32"><div class=CGlobalVariable>Global instance of Myna.Profiler.</div></div><div class=CToolTip id="tt33"><div class=CProperty><b>boolean, default false</b> indicates whether this sandbox should execute in debug mode. </div></div><div class=CToolTip id="tt34"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Function.createChainFunction=function(</td><td class=PParameter nowrap>initialChain</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>returns a function that will execute a chain of functions when called.</div></div><div class=CToolTip id="tt35"><div class=CProperty>Object that represents the global scope within the sandbox. </div></div><div class=CToolTip id="tt36"><div class=CFunction><b>Override</b> function to be executed before every function call and property access in a proxied Java object</div></div><div class=CToolTip id="tt37"><div class=CFunction><b>Override</b> function to be executed after every function call and property access in a proxied object</div></div><!--END_ND_TOOLTIPS-->




<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>