<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>Myna.ThreadPool - Myna Application Server</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script><script type="text/javascript" src="../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../js/shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../../js/shjs/css/sh_mild_white.css"></head><body id=ContentPage onLoad="NDOnLoad();sh_highlightDocument();"><script language=JavaScript><!--
if (browserType) {document.write("<div id=" + browserType + ">");if (browserVer) {document.write("<div id=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 02-10-2007 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass CTopic" id=MainTopic><h1 class=CTitle><a name="Myna.ThreadPool"></a>Myna.<span class=HB> </span>ThreadPool</h1><div class=CBody><p class=CParagraph>Creates a ThreadPool that can execute a function multiple times in separate threads, with a maximum concurrency</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBody><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Myna.ThreadPool" >Myna.<span class=HB> </span>ThreadPool</a></td><td class=SDescription>Creates a ThreadPool that can execute a function multiple times in separate threads, with a maximum concurrency</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Myna.ThreadPool.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.ThreadPool.ThreadPool" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">ThreadPool</a></td><td class=SDescription>Constructor for ThreadPool objects</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.ThreadPool.run" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">run</a></td><td class=SDescription>Adds a thread to the ThreadPool with  the supplied arguments</td></tr><tr class="SClass"><td class=SEntry><a href="#Myna.ThreadPool.Future" >Myna.<span class=HB> </span>ThreadPool.<span class=HB> </span>Future</a></td><td class=SDescription>wrapper for Java Future. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Myna.ThreadPool.Future.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.ThreadPool.Future.cancel" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">cancel</a></td><td class=SDescription>attempts to cancel this thread</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.ThreadPool.Future.get" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">get</a></td><td class=SDescription>waits for a result for this thread and returns the result</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#Myna.ThreadPool.Future.isDone" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">isDone</a></td><td class=SDescription>returns true if the thread has completed</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#Myna.ThreadPool.Future.isCancelled" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">isCancelled</a></td><td class=SDescription>returns true if the thread has been cancelled</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div>

<div class="CGroup CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.Functions"></a>Functions</h3></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.ThreadPool"></a>ThreadPool</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.ThreadPool = function (</td><td class=PParameter nowrap>fn,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Constructor for ThreadPool objects</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>fn</td><td class=CDLDescription>function to execute within the pool.&nbsp; The params for each thread will be passed to <a href="#Myna.ThreadPool.run" class=LFunction id=link7 onMouseOver="ShowTip(event, 'tt2', 'link7')" onMouseOut="HideTip('tt2')">run</a>.&nbsp; This function will be stripped of any closures or member properties.&nbsp; This means this function should only reference parameters and standard JS and Myna globals</td></tr><tr><td class=CDLEntry>options</td><td class=CDLDescription><b>Optional</b> <b>JS Object</b> See <b>Options</b> below</td></tr></table><h4 class=CHeading>Options</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>poolSize</td><td class=CDLDescription>Maximum number of concurrent threads.&nbsp; Defaults to 1</td></tr><tr><td class=CDLEntry>background</td><td class=CDLDescription>If true, threads will be run in the global background ThreadPool.&nbsp; Otherwise a local ThreadPool is used and will be terminated at request end.&nbsp; Default false.</td></tr></table></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.run"></a>run</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.ThreadPool.prototype.run = function()</td></tr></table></blockquote><p class=CParagraph>Adds a thread to the ThreadPool with  the supplied arguments</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>any</td><td class=CDLDescription>parameters are passed to the thread function defined in the constructor</td></tr></table><p class=CParagraph>Returns <a href="#Myna.ThreadPool.Future" class=LClass id=link8 onMouseOver="ShowTip(event, 'tt7', 'link8')" onMouseOut="HideTip('tt7')">Myna.ThreadPool.Future</a></p></div></div>

<div class="CClass CTopic"><h2 class=CTitle><a name="Myna.ThreadPool.Future"></a>Myna.<span class=HB> </span>ThreadPool.<span class=HB> </span>Future</h2><div class=CBody><p class=CParagraph>wrapper for Java Future.&nbsp; Returned by <a href="#Myna.ThreadPool.run" class=LFunction id=link13 onMouseOver="ShowTip(event, 'tt2', 'link13')" onMouseOut="HideTip('tt2')">Myna.ThreadPool.run</a></p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>future</td><td class=CDLDescription>Java Future instance</td></tr></table><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBody><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SGroup"><td class=SEntry><a href="#Myna.ThreadPool.Future.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Myna.ThreadPool.Future.cancel" id=link9 onMouseOver="ShowTip(event, 'tt3', 'link9')" onMouseOut="HideTip('tt3')">cancel</a></td><td class=SDescription>attempts to cancel this thread</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Myna.ThreadPool.Future.get" id=link10 onMouseOver="ShowTip(event, 'tt4', 'link10')" onMouseOut="HideTip('tt4')">get</a></td><td class=SDescription>waits for a result for this thread and returns the result</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#Myna.ThreadPool.Future.isDone" id=link11 onMouseOver="ShowTip(event, 'tt5', 'link11')" onMouseOut="HideTip('tt5')">isDone</a></td><td class=SDescription>returns true if the thread has completed</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#Myna.ThreadPool.Future.isCancelled" id=link12 onMouseOver="ShowTip(event, 'tt6', 'link12')" onMouseOut="HideTip('tt6')">isCancelled</a></td><td class=SDescription>returns true if the thread has been cancelled</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div>

<div class="CGroup CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.Future.Functions"></a>Functions</h3></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.Future.cancel"></a>cancel</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.ThreadPool.Future.prototype.cancel = function (</td><td class=PParameter nowrap>terminate</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>attempts to cancel this thread</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>terminate</td><td class=CDLDescription><b>Optional, default false</b> Attempts to terminate this thread if already running.</td></tr></table><h4 class=CHeading>Note</h4><p class=CParagraph>Terminating threads will only work if the thread is listening to interrupt signals, e.g.&nbsp; Thread.sleep().&nbsp; You can check for this in Myna code by checking java.lang.Thread.interrupted() during loops</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.Future.get"></a>get</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.ThreadPool.Future.prototype.get = function (</td><td class=PParameter nowrap>timeout,</td></tr><tr><td></td><td class=PParameter nowrap>throwOnTimeout</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>waits for a result for this thread and returns the result</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>timeout</td><td class=CDLDescription><b>Optional, default null (wait forever)</b> If a positive integer, this should be the number of milliseconds to wait for a response from the thread. see <a href="Date-js.html#Date.getInterval" class=LFunction id=link14 onMouseOver="ShowTip(event, 'tt8', 'link14')" onMouseOut="HideTip('tt8')">Date.getInterval</a>.&nbsp; If no response within the timeout, an exception is thrown</td></tr></table><p class=CParagraph>Returns thread result or throws exception</p><h4 class=CHeading>Note</h4><p class=CParagraph>Even if you don&rsquo;t set <u>timeout</u>, the request timeout <a href="standard_objects/req-sjs.html#$req.timeout" class=LProperty id=link15 onMouseOver="ShowTip(event, 'tt9', 'link15')" onMouseOut="HideTip('tt9')">$req.timeout</a> still applies</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.Future.isDone"></a>isDone</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.ThreadPool.Future.prototype.isDone = function ()</td></tr></table></blockquote><p class=CParagraph>returns true if the thread has completed</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="Myna.ThreadPool.Future.isCancelled"></a>isCancelled</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.ThreadPool.Future.prototype.isCancelled = function ()</td></tr></table></blockquote><p class=CParagraph>returns true if the thread has been cancelled</p></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->






<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.ThreadPool = function (</td><td class=PParameter nowrap>fn,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Constructor for ThreadPool objects</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.ThreadPool.prototype.run = function()</td></tr></table></blockquote>Adds a thread to the ThreadPool with  the supplied arguments</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.ThreadPool.Future.prototype.cancel = function (</td><td class=PParameter nowrap>terminate</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>attempts to cancel this thread</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Myna.ThreadPool.Future.prototype.get = function (</td><td class=PParameter nowrap>timeout,</td></tr><tr><td></td><td class=PParameter nowrap>throwOnTimeout</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>waits for a result for this thread and returns the result</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.ThreadPool.Future.prototype.isDone = function ()</td></tr></table></blockquote>returns true if the thread has completed</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>Myna.ThreadPool.Future.prototype.isCancelled = function ()</td></tr></table></blockquote>returns true if the thread has been cancelled</div></div><div class=CToolTip id="tt7"><div class=CClass>wrapper for Java Future. </div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Date.getInterval = function(</td><td class=PParameter nowrap>interval,</td></tr><tr><td></td><td class=PParameter nowrap>count</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>returns a time interval in milliseconds. </div></div><div class=CToolTip id="tt9"><div class=CProperty>The maximum time in seconds this request should be allowed to run. </div></div><!--END_ND_TOOLTIPS-->




<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>