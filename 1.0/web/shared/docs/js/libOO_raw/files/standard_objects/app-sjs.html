<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>$application - Myna Application Server</title><link rel="stylesheet" type="text/css" href="../../styles/main.css"><script language=JavaScript src="../../javascript/main.js"></script><script language=JavaScript src="../../javascript/searchdata.js"></script><script type="text/javascript" src="../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../js/shjs/css/sh_mild_white.css"><script type="text/javascript" src="../../../../../js/shjs/sh_main.js"></script><script type="text/javascript" src="../../../../../js/shjs/lang/sh_myna.js"></script><link type="text/css" rel="stylesheet" href="../../../../../js/shjs/css/sh_mild_white.css"></head><body id=ContentPage onLoad="NDOnLoad();sh_highlightDocument();"><script language=JavaScript><!--
if (browserType) {document.write("<div id=" + browserType + ">");if (browserVer) {document.write("<div id=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 02-10-2007 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass CTopic" id=MainTopic><h1 class=CTitle><a name="$application"></a>$application</h1><div class=CBody><p class=CParagraph>Global object for managing the current application.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>When a .ejs or .sjs file is requested, Myna examines every directory between the web root and the requested file, and includes any application.sjs file it finds, in the order found.&nbsp; Each of these files has an opportunity to:</p><ul class=CBulletList><li>declare application specific variables</li><li>execute functions</li><li>append or prepend $application.onXXX() event functions.&nbsp; See <a href="../Object-js.html#Object.before" class=LFunction id=link15 onMouseOver="ShowTip(event, 'tt12', 'link15')" onMouseOut="HideTip('tt12')">Object.before</a> and <a href="../Object-js.html#Object.after" class=LFunction id=link16 onMouseOver="ShowTip(event, 'tt13', 'link16')" onMouseOut="HideTip('tt13')">Object.after</a></li></ul><p class=CParagraph>Once all the application.sjs files have been included, <a href="#$application.onRequestStart" class=LFunction id=link17 onMouseOver="ShowTip(event, 'tt7', 'link17')" onMouseOut="HideTip('tt7')">$application.onRequestStart</a> is called.&nbsp; <a href="#$application.onApplicationStart" class=LFunction id=link18 onMouseOver="ShowTip(event, 'tt6', 'link18')" onMouseOut="HideTip('tt6')">$application.onApplicationStart</a> and <a href="#$application.onSessionStart" class=LFunction id=link19 onMouseOver="ShowTip(event, 'tt11', 'link19')" onMouseOut="HideTip('tt11')">$application.onSessionStart</a> may be called as well.</p><p class=CParagraph>Next, the originally requested .sjs or .ejs file is executed.</p><p class=CParagraph>Finally <a href="#$application.onRequestEnd" class=LFunction id=link20 onMouseOver="ShowTip(event, 'tt8', 'link20')" onMouseOut="HideTip('tt8')">$application.onRequestEnd</a> is called.</p><p class=CParagraph>Applications can be named or anonymous.&nbsp; Named applications are registered in the permissions system and also have a variable cache accessed through $application.set/get.</p><h4 class=CHeading>The application.sjs file should conform to this template</h4><h4 class=CHeading>Template</h4><blockquote><pre class="CCode sh_myna">{<br>    //--------- properties -----------------------------------------------<br>    appname:&quot;&quot;,// unique variable name of this application, omit this for anonymous applications<br>    idleMinutes:60,// Lifetime of Application variable cache<br>    //--------- local properties -----------------------------------------<br>    myProp:&quot;&quot;.<br><br>    //--------- init method ----------------------------------------------<br>    init:function(){    // this is run before any workflow methods to setup the application.<br><br>    },<br><br>    //--------- workflow methods -----------------------------------------<br>    // Each workflow method is appended to the same named method in the<br>    // parent application. If you need to override the parent functions<br>    // or prepend instead of append, use init()<br>    //<br>    onApplicationStart:function(){ // run if application cache has expired<br><br>    },<br>    onRequestStart:function(){ // run directly before requested file<br><br>    },<br>    onRequestEnd:function(){ // run directly after requested file<br><br>    },<br>    onSessionStart:function(){ // run before a call to $session.get/set when session is expired<br><br>    },<br>    onError:function(){ //run when an error occurs. Return true to cancel default.<br><br>    },<br>    onError404:function(){ //run when a call to a non-existent file is made. Return true to cancel default.<br><br>    },<br>    rights:[], // an array of Myna.Permissions.Right definitions to be created<br>}</pre></blockquote><h4 class=CHeading>Note</h4><p class=CParagraph>To maintain compatibility with older Myna code, an application.sjs file may contain plain JS.&nbsp; In this case it will internally be converted into an &ldquo;init&rdquo; function and executed.</p><h4 class=CHeading>Examples</h4><blockquote><pre class="CCode sh_myna">//from the Myna Adminstrator<br>{<br>    appname:&quot;myna_admin&quot;,<br>    prettyName:&quot;Myna Adminstrator&quot;,<br>    noAuthFuses:[&quot;login&quot;,&quot;auth&quot;, &quot;logout&quot;],<br>    defaultFuseAction:&quot;login&quot;,<br>    mainFuseAction:&quot;main&quot;,<br>    onRequestStart:function(){<br>        Myna.applyTo($server.globalScope);<br>        var session_cookie;     // stores encrypted session data<br><br>        if (!$req.data.fuseaction) $req.data.fuseaction=this.defaultFuseAction;<br>        //is the user authenticated?<br>        if (this.noAuthFuses.indexOf($req.data.fuseaction.toLowerCase()) != -1) return;<br>        if ( !$cookie.getAuthUserId() ){<br>                $req.data.fuseaction=this.defaultFuseAction;<br>        } else { //is the the user authorized for this fuseaction?<br>            if ($cookie.getAuthUserId() == &quot;myna_admin&quot;) return;<br><br>            var user = $cookie.getAuthUser();<br>            if (user.hasRight(&quot;myna_admin&quot;,&quot;full_admin_access&quot;)) return;<br><br>            $req.data.fuseaction=&quot;no_access&quot;;<br>            throw new Error(&quot;You do not have access to that feature&quot;)<br><br>        }<br><br><br>    },<br>    onApplicationStart:function(){<br>        Myna.applyTo($server.globalScope);<br>        var props =new Myna.File(&quot;/WEB-INF/classes/cron.properties&quot;)<br>        if (!props.exists()){<br>            props.writeString(&quot;&quot;)<br>        }<br><br>        //Load datasource driver properties<br>        var propFiles = new Myna.File(&quot;/shared/js/libOO/db_properties&quot;).listFiles(&quot;sjs&quot;);<br>        var db_props={}<br><br>        propFiles.forEach(function(propFile){<br>            if (!/[\w]+.sjs$/.test(propFile.getFileName())) return;<br>            var vendor = propFile.getFileName().split(/\./)[0];<br>            var obj={};<br>            Myna.include(propFile,obj);<br>            if (obj.dsInfo){<br>                db_props[vendor] = obj.dsInfo;<br>            }<br>        });<br>        $application.set(&quot;db_properties&quot;,db_props);<br><br>    },<br>    rights:[{<br>        name:&quot;full_admin_access&quot;,<br>        description:&quot;Full access to all Administrator functions&quot;<br>    }]<br>}<br><br><br><br>// an example of anonymous applications and altered workflow.<br><br>// parent folder<br>{<br>    //$application.directory/url are set before this file is loaded<br>    layoutFile:$application.directory +&quot;layout/outer_template.ejs&quot;<br>    init:function(){<br>        // this wraps all content generated in a layout file<br>        // by using &quot;before&quot; in this init function we are reversing the<br>        // execution order to &quot;inside-out&quot; instead of the default &quot;outside-in&quot;<br>        $application.before(&quot;onRequestEnd&quot;,function(){<br>            if (Page.includeLayout) {<br>                Myna.includeOnce(this.layoutFile,{content:$res.clear()})<br>            }<br>        })<br>    },<br>    onRequestStart:function(){<br>        //decalres global variable that the request page can access<br>        Page={<br>            includeLayout:true,<br>            title:&quot;Parent content&quot;,<br>            breadCrumbs:[{<br>                url:$application.url,<br>                label:&quot;Parent&quot;<br>            }],<br>        }<br>    },<br>}<br><br>//child folder<br>{<br>    layoutFile:$application.directory +&quot;layout/inner_template.ejs&quot;<br>    init:function(){<br>        // this wraps all content generated in a layout file, before the parent wrap<br>        // by using &quot;before&quot; in this init function we are reversing the<br>        // execution order to &quot;inside-out&quot; instead of the default &quot;outside-in&quot;<br>        $application.before(&quot;onRequestEnd&quot;,function(){<br>            if (Page.includeLayout) {<br>                Myna.includeOnce(this.layoutFile,{content:$res.clear()})<br>            }<br>        })<br>    },<br>    onRequestStart:function(){<br>        //override page defaults<br>        Page.title = &quot;Child content&quot;<br>        Page.breadCrumbs.push({<br>            url:$application.url,<br>            label:&quot;Child&quot;<br>        })<br>    },<br>}<br><br>//outer_template layout file<br>&lt;html&gt;<br>    &lt;head&gt;&lt;title&gt;&lt;%=Page.title%&gt;&lt;/title&gt;&lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;!-- Breadcrumbs --&gt;<br>        &lt;div class=&quot;header-breadcrumbs&quot;&gt;<br>            &lt;ul&gt;<br>            &lt;@loop array=&quot;Page.breadCrumbs&quot; element=&quot;bc&quot;&gt;<br>                &lt;li&gt;&lt;a href=&quot;&lt;%=bc.url%&gt;&quot;&gt;&lt;%=bc.label%&gt;&lt;/a&gt;&lt;/li&gt;<br>            &lt;/@loop&gt;<br>            &lt;/ul&gt;<br>        &lt;/div&gt;<br>        &lt;div id=&quot;main_content&quot;&gt;&lt;%=this.content%&gt;&lt;/div&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br><br>//inner_template layout file<br><br>&lt;div id=&quot;inner_content&quot;&gt;<br>    &lt;h1&gt; Here is the inner layout &lt;/h1&gt;<br>    &lt;%=this.content%&gt;<br>&lt;/div&gt;</pre></blockquote><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBody><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#$application" >$application</a></td><td class=SDescription>Global object for managing the current application.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#$application.Properties" >Properties</a></td><td class=SDescription></td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#$application.appname" >appname</a></td><td class=SDescription>String application name.</td></tr><tr class="SProperty SIndent2"><td class=SEntry><a href="#$application.displayName" >displayName</a></td><td class=SDescription>String application name for displaying to humans <b>Default appname</b>.</td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#$application.description" >description</a></td><td class=SDescription>Short description of this application</td></tr><tr class="SProperty SIndent2"><td class=SEntry><a href="#$application.idleMinutes" >idleMinutes</a></td><td class=SDescription>Max time in minutes between application data access before app memory is recovered <b>Default 60</b>.</td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#$application.rights" >rights</a></td><td class=SDescription>Array of <a href="../Permissions-sjs.html#Myna.Permissions.Right" class=LClass id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">Myna.Permissions.Right</a> definitions</td></tr><tr class="SProperty SIndent2"><td class=SEntry><a href="#$application.directory" >directory</a></td><td class=SDescription>MynaPath of directory of closest application.sjs <b>CALCULATED</b></td></tr><tr class="SProperty SIndent2 SMarked"><td class=SEntry><a href="#$application.url" >url</a></td><td class=SDescription>URL path of closest application.sjs <b>CALCULATED</b></td></tr><tr class="SProperty SIndent2"><td class=SEntry><a href="#$application.closeArray" >closeArray</a></td><td class=SDescription>Array of resources onwhich we should cal close() on request end.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#$application.Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#$application.addOpenObject" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">addOpenObject</a></td><td class=SDescription>Add an object to $application to be closed at the end of the thread. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#$application.get" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">get</a></td><td class=SDescription>Returns the application variable associated with the supplied key</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#$application.getData" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">getData</a></td><td class=SDescription>Returns a read-only object representing all of the application&rsquo;s data set via <a href="#$application.set" class=LFunction id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">set</a></td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#$application.set" id=link6 onMouseOver="ShowTip(event, 'tt5', 'link6')" onMouseOut="HideTip('tt5')">set</a></td><td class=SDescription>Set the application variable associated with the supplied key, returns <u>value</u></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#$application.onApplicationStart" id=link7 onMouseOver="ShowTip(event, 'tt6', 'link7')" onMouseOut="HideTip('tt6')">onApplicationStart</a></td><td class=SDescription>Called when a new application scope is created, before <a href="#$application.onRequestStart" class=LFunction id=link8 onMouseOver="ShowTip(event, 'tt7', 'link8')" onMouseOut="HideTip('tt7')">$application.onRequestStart</a>.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#$application.onRequestStart" id=link9 onMouseOver="ShowTip(event, 'tt7', 'link9')" onMouseOut="HideTip('tt7')">onRequestStart</a></td><td class=SDescription>Called before processing a request.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#$application.onRequestEnd" id=link10 onMouseOver="ShowTip(event, 'tt8', 'link10')" onMouseOut="HideTip('tt8')">onRequestEnd</a></td><td class=SDescription>Called after processing a request.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#$application.onError" id=link11 onMouseOver="ShowTip(event, 'tt9', 'link11')" onMouseOut="HideTip('tt9')">onError</a></td><td class=SDescription>Called when a an error occurs.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#$application.onError404" id=link12 onMouseOver="ShowTip(event, 'tt10', 'link12')" onMouseOut="HideTip('tt10')">onError404</a></td><td class=SDescription>Called when a request for a non-existent file occurs.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#$application.onSessionStart" id=link13 onMouseOver="ShowTip(event, 'tt11', 'link13')" onMouseOut="HideTip('tt11')">onSessionStart</a></td><td class=SDescription>Called when a new session is created, before <a href="#$application.onRequestStart" class=LFunction id=link14 onMouseOver="ShowTip(event, 'tt7', 'link14')" onMouseOut="HideTip('tt7')">$application.onRequestStart</a>.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div>

<div class="CGroup CTopic"><h3 class=CTitle><a name="$application.Properties"></a>Properties</h3></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.appname"></a>appname</h3><div class=CBody><p class=CParagraph>String application name.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>Should only contain letters, numbers and the underbar (_) character.&nbsp; If set, an application cache is created.&nbsp; Variables can be set and retrieved from this scope via <a href="#$application.set" class=LFunction id=link21 onMouseOver="ShowTip(event, 'tt5', 'link21')" onMouseOut="HideTip('tt5')">$application.set</a> and <a href="#$application.get" class=LFunction id=link22 onMouseOver="ShowTip(event, 'tt3', 'link22')" onMouseOut="HideTip('tt3')">$application.get</a>.&nbsp; Setting an appname also registers this application in the permissions system</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">..<br>appname:&quot;myna_admin&quot;,<br>..</pre></blockquote></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.displayName"></a>displayName</h3><div class=CBody><p class=CParagraph>String application name for displaying to humans <b>Default appname</b>.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>This should be a single line title for the application as you might display in you page title</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">..<br>displayName:&quot;Myna Administrator&quot;,<br>..</pre></blockquote></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.description"></a>description</h3><div class=CBody><p class=CParagraph>Short description of this application</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">..<br>description:&quot;Manages Myna server settings&quot;,<br>..</pre></blockquote></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.idleMinutes"></a>idleMinutes</h3><div class=CBody><p class=CParagraph>Max time in minutes between application data access before app memory is recovered <b>Default 60</b>.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>Any data set in the application scope should be expected to be destroyed at some point.&nbsp; Persistent data should be set in <a href="#$application.onApplicationStart" class=LFunction id=link23 onMouseOver="ShowTip(event, 'tt6', 'link23')" onMouseOut="HideTip('tt6')">$application.onApplicationStart</a> since that function is called before <a href="#$application.onRequestStart" class=LFunction id=link24 onMouseOver="ShowTip(event, 'tt7', 'link24')" onMouseOut="HideTip('tt7')">$application.onRequestStart</a> when the application cache has timed out.</p></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.rights"></a>rights</h3><div class=CBody><p class=CParagraph>Array of <a href="../Permissions-sjs.html#Myna.Permissions.Right" class=LClass id=link25 onMouseOver="ShowTip(event, 'tt1', 'link25')" onMouseOut="HideTip('tt1')">Myna.Permissions.Right</a> definitions</p><h4 class=CHeading>Detail</h4><p class=CParagraph>Any rights defined here will be created/updated before <a href="#$application.onApplicationStart" class=LFunction id=link26 onMouseOver="ShowTip(event, 'tt6', 'link26')" onMouseOut="HideTip('tt6')">$application.onApplicationStart</a>.&nbsp; The &ldquo;appname&rdquo; property is automatically added</p></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.directory"></a>directory</h3><div class=CBody><p class=CParagraph>MynaPath of directory of closest application.sjs <b>CALCULATED</b></p><h4 class=CHeading>Detail</h4><p class=CParagraph>application.sjs files are loaded consecutively from the web root to the requested file.&nbsp; Inside an application.sjs file, this represents the directory of the currently executing application.sjs file.&nbsp; Because each consecutive application.sjs file overwrites this property, it will always represent the innermost application.</p></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.url"></a>url</h3><div class=CBody><p class=CParagraph>URL path of closest application.sjs <b>CALCULATED</b></p><h4 class=CHeading>Detail</h4><p class=CParagraph>application.sjs files are loaded consecutively from the web root to the requested file.&nbsp; This property is the URL path of the last application.sjs file to run and generally represents the  &ldquo;home&rdquo; directory of the application.</p><h4 class=CHeading>Example</h4><p class=CParagraph>/servlet-context/my_app/</p></div></div>

<div class="CProperty CTopic"><h3 class=CTitle><a name="$application.closeArray"></a>closeArray</h3><div class=CBody><p class=CParagraph>Array of resources onwhich we should cal close() on request end.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>This is primarily to ensure the release of jdbc connection, statement, and resultSet objects, but anything with a close() function can be pushed onto this array.</p><h4 class=CHeading>See</h4><p class=CParagraph><a href="#$application.addOpenObject" class=LFunction id=link27 onMouseOver="ShowTip(event, 'tt2', 'link27')" onMouseOut="HideTip('tt2')">addOpenObject</a></p></div></div>

<div class="CGroup CTopic"><h3 class=CTitle><a name="$application.Functions"></a>Functions</h3></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.addOpenObject"></a>addOpenObject</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>addOpenObject:function(</td><td class=PParameter nowrap>obj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Add an object to $application to be closed at the end of the thread.&nbsp; Any object with a close() function can be added.&nbsp; Intended for resource cleanup.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>obj</td><td class=CDLDescription>an object with a close() function</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">function getFileStream(path){<br>    var fis = new java.io.FileInputStream(new File(scriptPath).javaFile);<br>    // we can't be sure the caller will close this stream, so we'll register<br>    // fis to be closed at the end of the thread<br>    $application.addOpenObject(fis);<br>    return fis;<br>}</pre></blockquote></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.get"></a>get</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>get:function(</td><td class=PParameter nowrap>key</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Returns the application variable associated with the supplied key</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>key</td><td class=CDLDescription>String variable name</td></tr></table><h4 class=CHeading>Returns</h4><p class=CParagraph>The application variable associated with the supplied <u>key</u>.</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">var lastUser = $application.get(&quot;lastUser&quot;)||$cookie.getAuthUser();</pre></blockquote></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.getData"></a>getData</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>getData:function(</td><td class=PParameter nowrap>key</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Returns a read-only object representing all of the application&rsquo;s data set via <a href="#$application.set" class=LFunction id=link28 onMouseOver="ShowTip(event, 'tt5', 'link28')" onMouseOut="HideTip('tt5')">set</a></p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>key</td><td class=CDLDescription>String variable name</td></tr></table><h4 class=CHeading>Returns</h4><p class=CParagraph>The application variable associated with the supplied <u>key</u>.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.set"></a>set</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>set:function(</td><td class=PParameter nowrap>key,</td></tr><tr><td></td><td class=PParameter nowrap>value</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Set the application variable associated with the supplied key, returns <u>value</u></p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>key</td><td class=CDLDescription>String variable name</td></tr><tr><td class=CDLEntry>value</td><td class=CDLDescription>value to set</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">$application.set(&quot;lastUser&quot;,$cookie.getAuthUser());</pre></blockquote></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.onApplicationStart"></a>onApplicationStart</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onApplicationStart:function()</td></tr></table></blockquote><p class=CParagraph>Called when a new application scope is created, before <a href="#$application.onRequestStart" class=LFunction id=link29 onMouseOver="ShowTip(event, 'tt7', 'link29')" onMouseOut="HideTip('tt7')">$application.onRequestStart</a>.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>A new application scope is typically created on server restart or the first request after a cache timeout.</p><p class=CParagraph>This function does nothing unless it is appended or replaced in an application.sjs file.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.onRequestStart"></a>onRequestStart</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onRequestStart:function()</td></tr></table></blockquote><p class=CParagraph>Called before processing a request.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>This function is called after all the initial request processing, but before executing the requested file.</p><p class=CParagraph>This function does nothing unless it is appended or replaced in an application.sjs file.</p><h4 class=CHeading>Example</h4><blockquote><pre class="CCode sh_myna">//in application.sjs<br><br>// Using Object.after ensures that an existing onRequestStart function<br>// loaded by an earlier application.sjs will be executed first<br>$application.after(&quot;onRequestStart&quot;,function(){<br>    // create a DataManager with a datasource that<br>    // has the same name as the application directory<br>    dm = new Myna.DataManager(new Myna.File($application.directory).getFileName);<br>})</pre></blockquote></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.onRequestEnd"></a>onRequestEnd</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onRequestEnd:function()</td></tr></table></blockquote><p class=CParagraph>Called after processing a request.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>This function is called after executing the requested file, but before sending output to the browser.</p><p class=CParagraph>This function does nothing unless it is appended or replaced in an application.sjs file.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.onError"></a>onError</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onError:function()</td></tr></table></blockquote><p class=CParagraph>Called when a an error occurs.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>exception</td><td class=CDLDescription>a caught exception object</td></tr></table><h4 class=CHeading>Detail</h4><p class=CParagraph>This function is executed before the default error handler.&nbsp; Return true to cancel the default error handler.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.onError404"></a>onError404</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onError404:function()</td></tr></table></blockquote><p class=CParagraph>Called when a request for a non-existent file occurs.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>This function is executed before the default 404 error handler.&nbsp; You can Use this to provide your own &ldquo;missing file&rdquo; error handler.</p><p class=CParagraph>Return true to cancel the default 404  error handler.</p></div></div>

<div class="CFunction CTopic"><h3 class=CTitle><a name="$application.onSessionStart"></a>onSessionStart</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onSessionStart:function()</td></tr></table></blockquote><p class=CParagraph>Called when a new session is created, before <a href="#$application.onRequestStart" class=LFunction id=link30 onMouseOver="ShowTip(event, 'tt7', 'link30')" onMouseOut="HideTip('tt7')">$application.onRequestStart</a>.</p><h4 class=CHeading>Detail</h4><p class=CParagraph>This function does nothing unless it is appended or replaced in an application.sjs file.</p></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->






<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CClass>Provides access to Right specific actions. </div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>addOpenObject:function(</td><td class=PParameter nowrap>obj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Add an object to $application to be closed at the end of the thread. </div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>get:function(</td><td class=PParameter nowrap>key</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the application variable associated with the supplied key</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>getData:function(</td><td class=PParameter nowrap>key</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Returns a read-only object representing all of the application&rsquo;s data set via set</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>set:function(</td><td class=PParameter nowrap>key,</td></tr><tr><td></td><td class=PParameter nowrap>value</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Set the application variable associated with the supplied key, returns <u>value</u></div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onApplicationStart:function()</td></tr></table></blockquote>Called when a new application scope is created, before $application.onRequestStart.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onRequestStart:function()</td></tr></table></blockquote>Called before processing a request.</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onRequestEnd:function()</td></tr></table></blockquote>Called after processing a request.</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onError:function()</td></tr></table></blockquote>Called when a an error occurs.</div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onError404:function()</td></tr></table></blockquote>Called when a request for a non-existent file occurs.</div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>onSessionStart:function()</td></tr></table></blockquote>Called when a new session is created, before $application.onRequestStart.</div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Object.prototype.before=function(</td><td class=PParameter nowrap>functionName,</td></tr><tr><td></td><td class=PParameter nowrap>functionObj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Prepends supplied function to the event chain of this object.</div></div><div class=CToolTip id="tt13"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>Object.prototype.after=function(</td><td class=PParameter nowrap>functionName,</td></tr><tr><td></td><td class=PParameter nowrap>functionObj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Appends supplied function to the event chain of this object.</div></div><!--END_ND_TOOLTIPS-->




<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>